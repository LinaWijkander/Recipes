name: Deploy
on:
  workflow_run:
    workflows: ["build"]
    branches: [ main ]
    types:
      - completed

jobs:
  deploy:
    runs-on: macos-latest
    if: github.ref == 'refs/heads/main'

    steps:
      - name: Downloading artifact
        uses: actions/download-artifact@v3
        with:
          name: Build
          path: dist

      - name: Deploying to gh-pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: dist
